<%include ../partials/head.html%>
<div class="tools-wrap">
    <div id="content" class="bs-docs-header tools" style="padding:15px 0;background:#EFF0F0;">
        <div class="container form-inline clearfix">
            <div class="pull-left">
                <button type="button" id="fn_save" class="btn btn-primary" style="margin-right:10px"><span
                        class="glyphicon glyphicon-floppy-save"></span> 保存
                </button>

                <button type="button" id="fn_preview" class="btn btn-success" data-toggle="modal"
                <%if(data.pagetype==1){%>data-target="#previewModal" <%}%>style="margin-right:10px"><span
                    class="glyphicon glyphicon-eye-open"></span> 预览</button>

                <button type="button" id="fn_publish" class="btn btn-danger" data-toggle="modal"
                        data-target="#publishModal"><span class="glyphicon glyphicon-cloud-upload"></span> 发布
                </button>
                <div class="btn-group">
                    <button type="button" id="fn_import" class="btn btn-default hide" data-toggle="modal"
                            data-target="#importModal"><span class="glyphicon glyphicon-import"></span> 导入数据
                    </button>
                    <button type="button" id="fn_export" class="btn btn-default" data-toggle="modal"
                            data-target="#exportModal"><span class="glyphicon glyphicon-export"></span> 导出数据
                    </button>
                </div>
                <div class="btn-group">
                    <button type="button" id="fn_build_page" class="btn btn-default" data-toggle="modal"
                            data-target="#buildPageModal"><span class="glyphicon glyphicon-cloud-download"></span> 生成页面
                    </button>
                </div>
                <div class="form-group" style="margin-left:20px">
                    <label class="control-label">模拟设备</label>
                    <select class="form-control input-sm" id="gs_simulation_size" style="width:198px">
                        <option value="414_608">iPhone 6 Plus (414x608)</option>
                        <option value="375_539">iPhone 6 (375x539)</option>
                        <option value="320_440">iPhone 5 (320x440)</option>
                        <option value="320_352">iPhone 4S (320x352) 超小屏</option>
                        <option value="360_567">Android (360x567)</option>
                    </select>
                </div>
                <div class="form-group" style="margin-left:10px;" id="gs_custom_width_wrap">
                    <label class="control-label" for="gs_custom_width">宽</label>
                    <input type="number" id="gs_custom_width" readonly="readonly"
                           class="form-control input-sm form-control-short"
                           value="<%=data.subjectList.designSolutionWidth%>">
                </div>
                <div class="form-group" style="margin-left:5px;" id="gs_custom_height_wrap">
                    <label class="control-label" for="gs_custom_height">高</label>
                    <input type="number" id="gs_custom_height" readonly="readonly"
                           class="form-control input-sm form-control-short"
                           value="<%=data.subjectList.designSolutionHeight%>">
                </div>
            </div>
            <div class="pull-right text-default j_save_message"
                 style="color:#fff;font-size:14px;line-height:34px"></div>
        </div>
    </div>
</div>
<div class="container">
    <div class="panel panel-default">
        <div class="panel-heading">
            <strong>全局设置</strong>
        </div>
        <div class="panel-body">
            <div class="form-horizontal">
                <div class="form-group">
                    <label for="gs_name" class="col-sm-2 control-label"><span class="text-danger">(必填)</span>
                        应用名称</label>

                    <div class="col-sm-6">
                        <input type="text" id="gs_name" class="form-control" value="<%=data.subjectList.name%>">
                    </div>
                </div>
                <div class="form-group">
                    <label for="gs_bg_color" class="col-sm-2 control-label">主背景色</label>

                    <div class="col-sm-2">
                        <input type="text" id="gs_bg_color" class="form-control cp-preventtouchkeyboardonshow"
                               tabindex="-1" readonly="" value="<%=data.subjectList.bgColor%>">
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label">背景音乐</label>

                    <div class="col-sm-10">
                        <div class="checkbox"><label>
                            <input type="checkbox" id="gs_bgm_switch" <%if(data.subjectList.bgm.url!=''){%>
                            checked="checked" <%}%> > 开启 </label>
                        </div>
                    </div>
                </div>
                <div id="gs_bgm_setting"
                     style="<%if(data.subjectList.bgm.url!=''){%> display:block; <%}else{%> display:none; <%}%>">
                    <div class="form-group">
                        <label class="col-sm-2 control-label">背景音乐设置</label>
                        <div class="col-sm-10 form-inline">
                            <div class="form-group">
                                <label for="gs_bgm_url">音频URL</label>

                                <div class="input-group">
                                    <input type="text" class="form-control" id="gs_bgm_url"
                                           value="<%=data.subjectList.bgm.url%>">

                                    <div class="input-group-btn btn-uploader">
                                        <div class="uploader-wrap">
                                            <label><input id="gs_bgm_url_uploader" type="file" name="file"
                                                          value=""></label>
                                        </div>
                                        <div class="btn btn-default">上传音频</div>
                                    </div>
                                </div>
                            </div>
                            <div class="checkbox" style="margin-left:30px; display:none;">
                                <label><input type="checkbox" id="gs_bgm_autoplay"
                                    <%if(data.subjectList.bgm.autoPlay!=''){%> checked="checked" <%}%>> 自动播放
                                    <small>（iOS下无法自动播放）</small>
                                </label>
                            </div>
                            <div class="checkbox" style="margin-left:30px; display:none;">
                                <label><input type="checkbox" id="gs_bgm_loop"
                                    <%if(data.subjectList.bgm.loop!=''){%> checked="checked" <%}%>> 循环播放
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label">微信分享</label>

                    <div class="col-sm-10">
                        <div class="checkbox">
                            <label><input type="checkbox" id="gs_weixin_switch"
                                <%if(data.subjectList.weixin.imgUrl!=''){%> checked="checked" <%}%> > 开启
                            </label>
                        </div>
                    </div>
                </div>
                <div id="gs_weixin_setting"
                     style="<%if(data.subjectList.weixin.imgUrl!=''){%> display:block; <%}else{%> display:none; <%}%>">
                    <div class="form-group">
                        <label class="col-sm-2 control-label">微信分享设置</label>

                        <div class="col-sm-10 form-inline">
                            <div class="form-group">
                                <label for="gs_weixin_imgurl">图标</label>

                                <div class="input-group">
                                    <input type="text" class="form-control" id="gs_weixin_imgurl" style="width:150px"
                                           value="<%=data.subjectList.weixin.imgUrl%>">

                                    <div class="input-group-btn btn-uploader">
                                        <div class="uploader-wrap">
                                            <label><input id="gs_weixin_imgurl_uploader" type="file" name="file"
                                                          value=""></label>
                                        </div>
                                        <div class="btn btn-default">上传图片</div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group" style="margin-left:15px">
                                <label for="gs_weixin_link">链接</label>
                                <input type="text" id="gs_weixin_link" class="form-control" style="width:150px"
                                       value="<%=data.subjectList.weixin.link%>" placeholder="默认使用页面地址">
                            </div>
                            <div class="form-group" style="margin-left:15px">
                                <label for="gs_weixin_title">标题</label>
                                <input type="text" id="gs_weixin_title" class="form-control" style="width:150px"
                                       value="<%=data.subjectList.weixin.title%>">
                            </div>
                            <div class="form-group" style="margin-left:15px">
                                <label for="gs_weixin_desc">内容</label>
                                <input type="text" id="gs_weixin_desc" class="form-control" style="width:150px"
                                       value="<%=data.subjectList.weixin.desc%>">
                            </div>
                            <div class="form-group" style="display:none;margin-left:15px">
                                <label for="gs_weixin_appid">AppID</label>
                                <input type="text" id="gs_weixin_appid" class="form-control" style="width:150px"
                                       value="<%=data.subjectList.weixin.appId%>">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div class="panel panel-default">
        <div class="panel-heading">
            <strong>页面设计</strong>
        </div>
        <div class="panel-body">
            <div id="pg_container" class="section">
                <%
                var page_index=0;
                data.subjectList.pages.forEach(function(page_json){
                page_index++;
                %>
                <!-- page -->
                <div id="pg_item_<%=page_json.id%>" data-id="<%=page_json.id%>" class="section pg_item">
                    <h4 class="clearfix">
                        <div class="pull-left options" style="margin-left: 10px; ">
                            <button type="button" class="btn btn-danger btn-xs pg_remove_page"><span
                                    class="glyphicon glyphicon-remove"></span> 删除页面
                            </button>
                            <!-- <button type="button" class="btn btn-default btn-xs pg_copy_page"><span class="glyphicon glyphicon-file"></span>
                            复制
                            </button>
                            -->
                            <div class="btn-group">
                                <button type="button" class="btn btn-default btn-xs pg_move_up disabled"><span
                                        class="glyphicon glyphicon-arrow-up"></span> 上移
                                </button>
                                <button type="button" class="btn btn-default btn-xs pg_move_down disabled"><span
                                        class="glyphicon glyphicon-arrow-down"></span> 下移
                                </button>
                            </div>
                        </div>
                    </h4>
                    <div class="row">
                        <div class="col-md-2" style="width:15%">
                            <div class="pg_add_wrap">
                                <h4 style="padding-bottom: 20px;margin-top: 0; margin-bottom: 15px;">
                                    <span class="glyphicon glyphicon-plus"></span> <span>添加内容</span>
                                </h4>

                                <div class="pg_add_element" data-type="image">
                                    <span class="glyphicon glyphicon-picture"></span> <span>图片</span>
                                </div>
                                <div class="pg_add_element" data-type="text">
                                    <span class="glyphicon glyphicon-text-width"></span> <span>文字</span>
                                </div>
                                <!-- <div class="pg_add_element" data-type="weixin">
                                   <span class="glyphicon"></span> <span>微信分享按钮</span>
                                </div> -->
                                <div class="pg_add_element hide" data-type="weixin">
                                    <span class="glyphicon glyphicon-share"></span> <span>分享</span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4" style="width:30%; padding-top: 10px;">
                            <!-- pg_preview start -->
                            <div class="pg_preview"
                            <%if(page_json.bgImage!=''){%>
                            style="background:url(<%=page_json.bgImage%>) no-repeat center top; background-size:100%
                            auto;"
                            <%}else if(page_json.bgColor!='rgb(0, 0, 0)'){%> style="background-color:
                            <%=page_json.bgColor%>;"
                            <%}else{%> style="background-color: <%=data.subjectList.bgColor%>;" <%}%>
                            >
                            <div class="pg_preview_element_wrap invert">
                                <div class="pg_line_v" style="display: none;"></div>
                                <div class="pg_line_h" style="display: none;"></div>
                                <%
                                var item_index=0;
                                page_json.elements.forEach(function(ele){
                                item_index++;
                                %>
                                <div id="<%=ele.id%>" class="item j_preview_item" data-id="<%=ele.name%>"
                                     data-type="<%=ele.type%>" data-x="<%=ele.x%>" data-y="<%=ele.y%>"
                                     data-link="<%=ele.link%>" animation="<%=ele.animation%>"
                                     animationiteration="<%=ele.animationIteration%>"
                                     animationduration="<%=ele.animationDuration%>"
                                     animationdelay="<%=ele.animationDelay%>"
                                     style="left:<%=ele.x%>px; top:<%=ele.y%>px; width:<%=ele.width%>; height:<%=ele.height%>; z-index:<%=ele.zIndex%>; margin: 0px;">
                                    <div class="btn-group item_operate">
                                        <!-- <button class="btn btn-primary btn-sm j_btn_copy"><span class="glyphicon glyphicon-file"></span> 复制
                                        </button> -->
                                        <button class="btn btn-primary btn-sm j_btn_remove"><span
                                                class="glyphicon glyphicon-trash"></span>
                                            删除
                                        </button>
                                    </div>
                                    <div class="item_mask"></div>
                                    <div class="item_wrap">

                                        <%if(ele.type=='text'){%>
                                        <div class="item_txt"
                                             style="display: inline-block; position: absolute; left: 0px; right: 0px; top: 50%; font-size: <%=ele.textSize%>; line-height: 40px; color: <%=ele.textColor%>; text-align: center; -webkit-transform: translate(0px, -50%);">
                                            <%=ele.text%>
                                        </div>
                                        <%}%>

                                        <%if(ele.type=='image'){%>
                                        <img class="item_img" src="<%=ele.image%>"/>
                                        <%}%>

                                    </div>
                                    <span class="arrow arrow-r"></span>
                                    <span class="arrow arrow-b"></span>
                                    <span class="arrow arrow-rb"></span>
                                    <input type="text" class="j_item_txt" value="<%=ele.text%>"
                                           style="color: rgb(0, 0, 0); display: none; background-color: rgba(255, 255, 255, 0.8);">
                                </div>
                                <%if(ele.type=='image'){%>
                                <div class="btn btn-primary btn-sm j_btn_upload btn-uploader" style="display:none;">
                                    <div class="uploader-wrap">
                                        <label><input id="page_bg_upload_<%=page_index%>_<%=item_index%>" type="file"
                                                      name="file"></label>
                                    </div>
                                    <span class="glyphicon glyphicon-cloud-upload"></span>上传图片
                                </div>
                                <%}%>

                                <%})%>
                            </div>
                        </div>
                        <!-- pg_preview end -->
                    </div>
                    <div class="col-md-5 pg_settings_col" style="width:50%; padding-top: 10px;">
                        <div class="form pg_element_setting" style="height: 506px;">
                            <div class="form-group clearfix" style="margin-top: 10px;">
                                <label class="col-sm-2 col-left control-label"
                                       style="margin-top: 5px; margin-left: -15px;">背景色</label>

                                <div class="col-sm-7 col-right input-group">
                                    <input type="text"
                                           class="form-control input-sm pg_bg_color cp-preventtouchkeyboardonshow"
                                           value="<%=page_json.bgColor%>"
                                           tabindex="-1" readonly=""
                                           style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); background-position: initial initial; background-repeat: initial initial;">
                                    <span class="input-group-addon">
                                    <span class="glyphicon glyphicon-link"></span>
                                    <input type="checkbox" class="pg_bg_color_link" <%if(page_json.bgColorLink==1){%> checked="checked" <%}%> >
                                    </span>
                                </div>
                            </div>
                            <div class="form-group form-inline clearfix" style="margin-top: 10px;">
                                <label class="col-sm-2 col-left control-label"
                                       style="margin-top: 5px; margin-left: -15px;">背景图</label>

                                <div class="col-sm-7 col-right input-group">
                                    <input type="text" class="form-control input-sm j_bg_image"
                                           value="<%=page_json.bgImage%>">

                                    <div class="input-group-btn btn-uploader">
                                        <div class="uploader-wrap">
                                            <label><input id="page_bg_upload_<%=page_index%>" type="file"
                                                          name="file"></label>
                                        </div>
                                        <div class="btn btn-default">上传图片</div>
                                    </div>
                                </div>
                                <div class="checkbox" style="margin: 2px 0 0 10px;">
                                    <label>
                                        <input type="checkbox" class="j_stretch_bg" <%if(page_json.isStretch==1){%>
                                        checked="checked" <%}%> > 背景拉伸
                                    </label>
                                </div>
                            </div>
                            <hr>
                            <div class="form-group setting-level">
                                <button type="button" class="btn btn-default" data-value="up"><span
                                        class="glyphicon glyphicon-arrow-up"></span>
                                    上移一层
                                </button>
                                <button type="button" class="btn btn-default" data-value="down"><span
                                        class="glyphicon glyphicon-arrow-down"></span>
                                    下移一层
                                </button>
                                <button type="button" class="btn btn-default" data-value="top"><span
                                        class="glyphicon glyphicon-sort-by-attributes-alt"></span> 置于顶层
                                </button>
                                <button type="button" class="btn btn-default" data-value="bottom"><span
                                        class="glyphicon glyphicon-sort-by-attributes"></span> 置于底层
                                </button>
                                <span class="alert-info pe_z_index" style="margin-left: 20px;"></span>
                            </div>
                            <div class="form-group setting-animation">
                                <!-- <button type="button" class="btn btn-default" data-value="in"><span class="glyphicon glyphicon-arrow-right"></span>
                                出现效果
                                </button>
-->
                                <button type="button" class="btn btn-default" data-value="on"><span
                                        class="glyphicon glyphicon-play"></span> 动作效果
                                </button>
                                <!-- <button type="button" class="btn btn-default" data-value="out"><span class="glyphicon glyphicon-arrow-left"></span>
                                消失效果
                                </button> -->
                            </div>
                            <div class="form-group setting-link">
                                <button type="button" class="btn btn-default btn_set_link" data-value="link"><span
                                        class="glyphicon glyphicon-link"></span> 设置链接
                                </button>
                                <button type="button" class="btn btn-default btn_set_text_color"
                                        data-value="color"><span
                                        class="glyphicon glyphicon-adjust"></span> 设置文本颜色
                                </button>
                            </div>
                            <div class="form-group setting-bg hide" style="margin-top: 30px;">
                                <label class="checkbox-inline">
                                    <input type="checkbox" class="pg_set_bg" value="1"> 设置为背景
                                </label>
                            </div>
                            <hr>
                            <!-- 动画 -->
                            <div class="form-group setting-detail setting-detail-animation-on hide">
                                <div class="form-group clearfix">
                                    <label class="col-sm-3 col-left control-label">动画效果</label>

                                    <div class="col-sm-6 col-right">
                                        <div class="input-group">
                                          <span class="input-group-btn">
                                          <button type="button" class="btn btn-sm pe_play_animation">
                                              <span class="glyphicon glyphicon-play"></span></button>
                                          </span>
                                            <select class="form-control input-sm pe_animation"></select>
                                            <input type="hidden" class="pe_animation_type">
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group clearfix j_animation_ext">
                                    <label class="col-sm-3 col-left control-label">动画循环次数</label>

                                    <div class="col-sm-6 col-right">
                                        <div class="input-group">
                                            <input type="number" class="form-control input-sm pe_animation_iteration">
                                            <span class="input-group-addon">( <strong>0</strong> 表示无限循环)</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group clearfix j_animation_ext">
                                    <label class="col-sm-3 col-left control-label">动画持续时间</label>

                                    <div class="col-sm-6 col-right">
                                        <div class="input-group">
                                            <input type="number" class="form-control input-sm pe_animation_duration">
                                            <span class="input-group-addon">ms (毫秒)</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group clearfix j_animation_ext">
                                    <label class="col-sm-3 col-left control-label">动画延迟时间</label>

                                    <div class="col-sm-6 col-right">
                                        <div class="input-group">
                                            <input type="number" class="form-control input-sm pe_animation_delay">
                                            <span class="input-group-addon">ms (毫秒)</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- 设置链接 -->
                            <div class="form-group setting-detail setting-detail-link hide">
                                <div class="form-group clearfix">
                                    <label class="col-sm-2 col-left control-label" style="margin-top: 5px;">链接地址</label>

                                    <div class="col-sm-7 col-right">
                                        <input type="text" class="form-control input-sm pe_link">
                                    </div>
                                </div>
                            </div>
                            <!-- 设置文本颜色 -->
                            <div class="form-group setting-detail setting-detail-color hide">
                                <div class="form-group clearfix">
                                    <label class="col-sm-2 col-left control-label" style="margin-top: 5px;">文本颜色</label>

                                    <div class="col-sm-7 col-right">
                                        <input type="text"
                                               class="form-control input-sm pe_text_color cp-preventtouchkeyboardonshow"
                                               tabindex="-1"
                                               readonly=""
                                               style="background-color: rgb(0, 0, 0); color: rgb(255, 255, 255); background-position: initial initial; background-repeat: initial initial;">
                                    </div>
                                </div>
                            </div>
                            <!-- item 文件上传 -->
                            <!-- <div class="form-group hide">
                               <div class="input-group-btn btn-uploader j_upload_image">
                                  <div class="uploader-wrap">
                                     <label>
                                     <input type="file" name="file" class="j_item_image">
                                     </label>
                                  </div>
                                  <input type="hidden" class="pe_image">
                                  <div class="btn btn-default btn-sm">上传图片</div>
                               </div>
                            </div> -->
                            <div class="pg_element_setting_mask"></div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- page end -->
            <%})%>
        </div>
        <button type="button" id="fn_add_page" class="btn btn-primary" style="margin-bottom:20px"><span
                class="glyphicon glyphicon-plus"></span> 添加页面
        </button>
    </div>
</div>
</div>
<!-- exportModal -->
<div id="exportModal" class="modal fade in" aria-hidden="true" style="display: none;">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                    <span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title"><span class="glyphicon glyphicon-export"></span> 导出数据</h4>
            </div>
            <div class="modal-body">
                <div class="alert alert-warning">导出数据为JSON格式，请将数据拷贝到本地文本文件保存。</div>
                <div id="exportDataEditor" class="">
                <pre id="editor">
                 </pre>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关 闭</button>
                <button type="button" class="btn btn-default" id="j_import_data">导入数据</button>
                <button type="button" id="j_json_copy" class="btn btn-primary j_clipboard">复制到剪切板</button>
            </div>
        </div>
    </div>
</div>
<!-- exportModal end -->
<!-- previewModal -->
<div id="previewModal" class="modal fade in" aria-hidden="false" style="display: none;">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                          <span aria-hidden="true">
                              ×
                          </span>
                          <span class="sr-only">
                              Close
                          </span>
                </button>
                <h4 class="modal-title">
                          <span class="glyphicon glyphicon-eye-open">
                          </span>
                    预览
                </h4>
            </div>
            <div class="modal-body">
                <div class="section form-inline">
                    <div class="form-group">
                        <select class="form-control input-sm j_preview_iframe_size" style="width:180px">
                            <option value="414_608" selected="">
                                iPhone 6 Plus (414x608)
                            </option>
                            <option value="375_539">
                                iPhone 6 (375x539)
                            </option>
                            <option value="320_440" >
                                iPhone 5 (320x440)
                            </option>
                            <option value="320_352">
                                iPhone 4S (320x352) 超小屏
                            </option>
                            <option value="360_567">
                                Android (360x567)
                            </option>
                        </select>
                    </div>
                    <div class="form-group" style="margin-left:10px">
                        <label>
                            宽度
                        </label>
                        <input type="number" class="form-control input-sm j_preview_iframe_width disabled"
                               readonly="readonly" value="320">
                    </div>
                    <div class="form-group" style="margin-left:10px">
                        <label>
                            高度
                        </label>
                        <input type="number" class="form-control input-sm j_preview_iframe_height disabled"
                               readonly="readonly" value="440">
                    </div>
                    <button type="button" class="btn btn-primary btn-sm j_preview_refresh"
                            style="margin-left:10px">
                              <span class="glyphicon glyphicon-refresh">
                              </span>
                        刷新
                    </button>
                    <button type="button" class="btn btn-success btn-sm j_preview_mobile"
                            data-toggle="modal" data-target="#mobilePreviewQrcodeModal">
                              <span class="glyphicon glyphicon-phone">
                              </span>
                        手机预览
                    </button>
                    <button id="js-iframe-goprev" type="button" class="btn"><span class="glyphicon glyphicon-hand-up">
                              </span>上一页</button>
                    <button id="js-iframe-gonext" type="button" class="btn"><span class="glyphicon glyphicon-hand-down">
                              </span>下一页</button>
                </div>
                <div class="preview-wrap" style="width: 328px; height: 440px;">
                    <iframe id="js-preview-iframe" name="js-preview-iframe" src="" frameborder="0">
                    </iframe>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- previewModal end -->
<!-- mobilePreviewQrcodeModal -->
<div id="mobilePreviewQrcodeModal" class="modal fade" aria-hidden="true" style="display: none;">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                          <span aria-hidden="true">
                              ×
                          </span>
                          <span class="sr-only">
                              Close
                          </span>
                </button>
                <h4 class="modal-title">
                          <span class="glyphicon glyphicon-phone">
                          </span>
                    手机预览，扫描二维码
                </h4>
            </div>
            <div class="modal-body">
                <div class="mobile_preview_qrcode" id="mobile_preview_qrcode" style="height:250px;line-height:250px;margin:0 auto;text-align:center;width:250px"></div>
            </div>
        </div>
    </div>
</div>
<!-- mobilePreviewQrcodeModal end -->
<!-- buildPageModal -->
<div id="buildPageModal" class="modal fade">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                    <span aria-hidden="true">
                        ×
                    </span>
                    <span class="sr-only">
                        Close
                    </span>
                </button>
                <h4 class="modal-title">
                    <span class="glyphicon glyphicon-cloud-download">
                    </span>
                    生成页面
                </h4>
            </div>
            <div class="modal-body">
                <div class="alert alert-warning" role="alert">
                    必须先发布应用才能查看生成页面的代码。新建文件
                    <strong>
                        index.html
                    </strong>
                    ，将页面代码粘贴到 index.html 即可。
                </div>
                <div id="buildPageEditor" class="form-control ace_editor ace-dawn" style="height:500px"></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">
                    关 闭
                </button>
                <button type="button" id="j_html_copy" class="btn btn-primary j_clipboard">
                    复制到剪切板
                </button>
            </div>
            <div class="mask">
            </div>
        </div>
    </div>
</div>
<!-- buildPageModal end -->
<script id="addEl" type="text/html">
    <div id="pg_preview_it_pe{{idN}}" class="item j_preview_item" data-id="pe{{idN}}"  data-type="{{type}}" animation=""  animationIteration="" animationDuration="1000" animationDelay="" style="left: 0%; top: 0%; width: 100%; height: 10%; z-index: 11; margin: 0px;">
        <div class="btn-group item_operate">
            <button class="btn btn-primary btn-sm j_btn_remove"><span class="glyphicon glyphicon-trash"></span> 删除</button>
        </div>
        <div class="item_mask"></div>
        <div class="item_wrap">
            {{if type== "text"}}
            <div class="item_txt" style="display: inline-block; position: absolute; left: 0px; right: 0px; top: 50%; font-size: 41px; line-height: 41px; color: rgb(0, 0, 0); text-align: center; -webkit-transform: translate(0px, -50%);">单行文字内容</div>
            {{/if}}
            {{if type == "image" }}
            <img class="item_img" src="" />
            {{/if}}
        </div>
        <span class="arrow arrow-r"></span>
        <span class="arrow arrow-b"></span>
        <span class="arrow arrow-rb"></span>
        {{if type == "text"}}
        <input type="text" class="j_item_txt" style="color: rgb(0, 0, 0); display: none; background-color: rgba(255, 255, 255, 0.8);">
        {{/if}}
    </div>
    {{if type == "image"}}
    <div class="btn btn-primary btn-sm j_btn_upload btn-uploader">
        <div class="uploader-wrap">
            <label><input class="j_btn_upload_bt" type="file" name="file"></label>
        </div>
        <span class="glyphicon glyphicon-cloud-upload"></span>上传图片
    </div>
    {{/if}}
</script>
<script id="addDl" type="text/html">
    <div id="pg_item_{{page_id}}" data-id="{{page_id}}" class="section pg_item">
        <h4 class="clearfix">
            <div class="pull-left options" style="margin-left: 10px; ">
                <button type="button" class="btn btn-danger btn-xs pg_remove_page"><span class="glyphicon glyphicon-remove"></span> 删除页面
                </button>
                <div class="btn-group">
                    <button type="button" class="btn btn-default btn-xs pg_move_up disabled"><span
                            class="glyphicon glyphicon-arrow-up"></span> 上移
                    </button>
                    <button type="button" class="btn btn-default btn-xs pg_move_down disabled"><span
                            class="glyphicon glyphicon-arrow-down"></span> 下移
                    </button>
                </div>
            </div>
        </h4>
        <div class="row">
            <div class="col-md-2" style="width:15%">
                <div class="pg_add_wrap">
                    <h4 style="padding-bottom: 20px;margin-top: 0; margin-bottom: 15px;">
                        <span class="glyphicon glyphicon-plus"></span> <span>添加内容</span>
                    </h4>
                    <div class="pg_add_element" data-type="image">
                        <span class="glyphicon glyphicon-picture"></span> <span>图片</span>
                    </div>
                    <div class="pg_add_element" data-type="text">
                        <span class="glyphicon glyphicon-text-width"></span> <span>文字</span>
                    </div>
                    <!-- <div class="pg_add_element" data-type="weixin">
                       <span class="glyphicon"></span> <span>微信分享按钮</span>
                    </div> -->
                    <div class="pg_add_element hide" data-type="weixin">
                        <span class="glyphicon glyphicon-share"></span> <span>分享</span>
                    </div>
                </div>
            </div>
            <div class="col-md-4" style="width:30%; padding-top: 10px;">
                <!-- pg_preview start -->
                <div class="pg_preview" style="background-color: rgb(255,255,255);">
                    <div class="pg_preview_element_wrap invert">
                        <div class="pg_line_v" style="display: none;"></div>
                        <div class="pg_line_h" style="display: none;"></div>

                    </div>
                </div>
                <!-- pg_preview end -->
            </div>
            <div class="col-md-5 pg_settings_col" style="width:50%; padding-top: 10px;">
                <div class="form pg_element_setting" style="height: 506px;">
                    <div class="form-group clearfix" style="margin-top: 10px;">
                        <label class="col-sm-2 col-left control-label" style="margin-top: 5px; margin-left: -15px;">背景色</label>
                        <div class="col-sm-7 col-right input-group">
                            <input type="text" class="form-control input-sm pg_bg_color cp-preventtouchkeyboardonshow" value="rgb(255,255,255)" tabindex="-1" readonly="" style="color: rgb(0, 0, 0); background: rgb(255, 255, 255);">
                                    <span class="input-group-addon">
                                    <span class="glyphicon glyphicon-link"></span>
                                    <input type="checkbox" class="pg_bg_color_link">
                                    </span>
                        </div>
                    </div>
                    <div class="form-group form-inline clearfix" style="margin-top: 10px;">
                        <label class="col-sm-2 col-left control-label" style="margin-top: 5px; margin-left: -15px;">背景图</label>
                        <div class="col-sm-7 col-right input-group">
                            <input type="text" class="form-control input-sm j_bg_image" value="">
                            <div class="input-group-btn btn-uploader">
                                <div class="uploader-wrap">
                                    <label><input id="page_bg_upload_{{page_index}}" type="file" name="file"></label>
                                </div>
                                <div class="btn btn-default">上传图片</div>
                            </div>
                        </div>
                        <div class="checkbox" style="margin: 2px 0 0 10px;">
                            <label>
                                <input type="checkbox" class="j_stretch_bg"> 背景拉伸
                            </label>
                        </div>
                    </div>
                    <hr>
                    <div class="form-group setting-level">
                        <button type="button" class="btn btn-default" data-value="up"><span class="glyphicon glyphicon-arrow-up"></span>
                            上移一层
                        </button>
                        <button type="button" class="btn btn-default" data-value="down"><span class="glyphicon glyphicon-arrow-down"></span>
                            下移一层
                        </button>
                        <button type="button" class="btn btn-default" data-value="top"><span class="glyphicon glyphicon-sort-by-attributes-alt"></span> 置于顶层
                        </button>
                        <button type="button" class="btn btn-default" data-value="bottom"><span class="glyphicon glyphicon-sort-by-attributes"></span> 置于底层
                        </button>
                        <span class="alert-info pe_z_index" style="margin-left: 20px;"></span>
                    </div>
                    <div class="form-group setting-animation">
                        <button type="button" class="btn btn-default" data-value="on"><span class="glyphicon glyphicon-play"></span> 动作效果
                        </button>
                    </div>
                    <div class="form-group setting-link">
                        <button type="button" class="btn btn-default btn_set_link" data-value="link"><span class="glyphicon glyphicon-link"></span> 设置链接
                        </button>
                        <button type="button" class="btn btn-default btn_set_text_color" data-value="color"><span class="glyphicon glyphicon-adjust"></span> 设置文本颜色
                        </button>
                    </div>
                    <div class="form-group setting-bg hide" style="margin-top: 30px;">
                        <label class="checkbox-inline">
                            <input type="checkbox" class="pg_set_bg" value="1"> 设置为背景
                        </label>
                    </div>
                    <hr>
                    <!-- 动画 -->
                    <div class="form-group setting-detail setting-detail-animation-on hide">
                        <div class="form-group clearfix">
                            <label class="col-sm-3 col-left control-label">动画效果</label>
                            <div class="col-sm-6 col-right">
                                <div class="input-group">
                                          <span class="input-group-btn">
                                          <button type="button" class="btn btn-sm pe_play_animation">
                                              <span class="glyphicon glyphicon-play"></span></button>
                                          </span>
                                    <select class="form-control input-sm pe_animation">

                                    </select>
                                    <input type="hidden" class="pe_animation_type">
                                </div>
                            </div>
                        </div>
                        <div class="form-group clearfix j_animation_ext">
                            <label class="col-sm-3 col-left control-label">动画循环次数</label>
                            <div class="col-sm-6 col-right">
                                <div class="input-group">
                                    <input type="number" class="form-control input-sm pe_animation_iteration">
                                    <span class="input-group-addon">( <strong>0</strong> 表示无限循环)</span>
                                </div>
                            </div>
                        </div>
                        <div class="form-group clearfix j_animation_ext">
                            <label class="col-sm-3 col-left control-label">动画持续时间</label>
                            <div class="col-sm-6 col-right">
                                <div class="input-group">
                                    <input type="number" class="form-control input-sm pe_animation_duration">
                                    <span class="input-group-addon">ms (毫秒)</span>
                                </div>
                            </div>
                        </div>
                        <div class="form-group clearfix j_animation_ext">
                            <label class="col-sm-3 col-left control-label">动画延迟时间</label>
                            <div class="col-sm-6 col-right">
                                <div class="input-group">
                                    <input type="number" class="form-control input-sm pe_animation_delay">
                                    <span class="input-group-addon">ms (毫秒)</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- 设置链接 -->
                    <div class="form-group setting-detail setting-detail-link hide">
                        <div class="form-group clearfix">
                            <label class="col-sm-2 col-left control-label" style="margin-top: 5px;">链接地址</label>
                            <div class="col-sm-7 col-right">
                                <input type="text" class="form-control input-sm pe_link">
                            </div>
                        </div>
                    </div>
                    <!-- 设置文本颜色 -->
                    <div class="form-group setting-detail setting-detail-color hide">
                        <div class="form-group clearfix">
                            <label class="col-sm-2 col-left control-label" style="margin-top: 5px;">文本颜色</label>
                            <div class="col-sm-7 col-right">
                                <input type="text" class="form-control input-sm pe_text_color cp-preventtouchkeyboardonshow" tabindex="-1" readonly="" style="background-color: rgb(0, 0, 0); color: rgb(255, 255, 255); background-position: initial initial; background-repeat: initial initial;">
                            </div>
                        </div>
                    </div>

                    <div class="pg_element_setting_mask" style="display: none;"></div>
                </div>
            </div>
        </div>
    </div>
</script>
<script id="addFl" type="text/html">
    <option value="" selected="selected">无</option>
    <optgroup label="出现动画（出场）">
        <option value="boingInUp" data-type="in">boingInUp</option>
        <option value="boomIn" data-type="in">boomIn</option>
        <option value="bounceIn" data-type="in">bounceIn</option>
        <option value="bounceInDown" data-type="in">bounceInDown</option>
        <option value="bounceInLeft" data-type="in">bounceInLeft</option>
        <option value="bounceInRight" data-type="in">bounceInRight</option>
        <option value="bounceInUp" data-type="in">bounceInUp</option>
        <option value="fadeIn" data-type="in">fadeIn</option>
        <option value="fadeInDown" data-type="in">fadeInDown</option>
        <option value="fadeInDownBig" data-type="in">fadeInDownBig</option>
        <option value="fadeInLeft" data-type="in">fadeInLeft</option>
        <option value="fadeInLeftBig" data-type="in">fadeInLeftBig</option>
        <option value="fadeInRightBig" data-type="in">fadeInRightBig</option>
        <option value="fadeInUp" data-type="in">fadeInUp</option>
        <option value="fadeInUpBig" data-type="in">fadeInUpBig</option>
        <option value="flipInX" data-type="in">flipInX</option>
        <option value="flipInY" data-type="in">flipInY</option>
        <option value="foolishIn" data-type="in">foolishIn</option>
        <option value="lightSpeedIn" data-type="in">lightSpeedIn</option>
        <option value="puffIn" data-type="in">puffIn</option>
        <option value="rollIn" data-type="in">rollIn</option>
        <option value="rotateIn" data-type="in">rotateIn</option>
        <option value="rotateInDownLeft" data-type="in">rotateInDownLeft</option>
        <option value="rotateInDownRight" data-type="in">rotateInDownRight</option>
        <option value="rotateInUpLeft" data-type="in">rotateInUpLeft</option>
        <option value="rotateInUpRight" data-type="in">rotateInUpRight</option>
        <option value="spaceInDown" data-type="in">spaceInDown</option>
        <option value="spaceInLeft" data-type="in">spaceInLeft</option>
        <option value="spaceInRight" data-type="in">spaceInRight</option>
        <option value="spaceInUp" data-type="in">spaceInUp</option>
        <option value="swashIn" data-type="in">swashIn</option>
        <option value="tinDownIn" data-type="in">tinDownIn</option>
        <option value="tinLeftIn" data-type="in">tinLeftIn</option>
        <option value="tinRightIn" data-type="in">tinRightIn</option>
        <option value="tinUpIn" data-type="in">tinUpIn</option>
        <option value="twisterInDown" data-type="in">twisterInDown</option>
        <option value="twisterInUp" data-type="in">twisterInUp</option>
        <option value="vanishIn" data-type="in">vanishIn</option>
        <option value="zoomIn" data-type="in">zoomIn</option>
        <option value="zoomInDown" data-type="in">zoomInDown</option>
        <option value="zoomInLeft" data-type="in">zoomInLeft</option>
        <option value="zoomInRight" data-type="in">zoomInRight</option>
        <option value="zoomInUp" data-type="in">zoomInUp</option>
    </optgroup>
    <optgroup label="特效动画（过程）">
        <option value="bounce" data-type="special">bounce</option>
        <option value="circleRotate" data-type="special">circleRotate</option>
        <option value="flash" data-type="special">flash</option>
        <option value="flip" data-type="special">flip</option>
        <option value="hinge" data-type="special">hinge</option>
        <option value="magic" data-type="special">magic</option>
        <option value="openDownLeft" data-type="special">openDownLeft</option>
        <option value="openUpLeft" data-type="special">openUpLeft</option>
        <option value="openUpRight" data-type="special">openUpRight</option>
        <option value="openDownRight" data-type="special">openDownRight</option>
        <option value="openDownLeftRetourn" data-type="special">openDownLeftRetourn</option>
        <option value="openUpLeftRetourn" data-type="special">openUpLeftRetourn</option>
        <option value="openUpRightRetourn" data-type="special">openUpRightRetourn</option>
        <option value="openDownRightRetourn" data-type="special">openDownRightRetourn</option>
        <option value="perspectiveDown" data-type="special">perspectiveDown</option>
        <option value="perspectiveLeft" data-type="special">perspectiveLeft</option>
        <option value="perspectiveRight" data-type="special">perspectiveRight</option>
        <option value="perspectiveUp" data-type="special">perspectiveUp</option>
        <option value="perspectiveDownRetourn" data-type="special">perspectiveDownRetourn</option>
        <option value="perspectiveLeftRetourn" data-type="special">perspectiveLeftRetourn</option>
        <option value="perspectiveRightRetourn" data-type="special">perspectiveRightRetourn</option>
        <option value="perspectiveUpRetourn" data-type="special">perspectiveUpRetourn</option>
        <option value="pulse" data-type="special">pulse</option>
        <option value="rubberBand" data-type="special">rubberBand</option>
        <option value="shake" data-type="special">shake</option>
        <option value="slideDown" data-type="special">slideDown</option>
        <option value="slideLeft" data-type="special">slideLeft</option>
        <option value="slideRight" data-type="special">slideRight</option>
        <option value="slideUp" data-type="special">slideUp</option>
        <option value="slideDownRetourn" data-type="special">slideDownRetourn</option>
        <option value="slideLeftRetourn" data-type="special">slideLeftRetourn</option>
        <option value="slideRightRetourn" data-type="special">slideRightRetourn</option>
        <option value="slideUpRetourn" data-type="special">slideUpRetourn</option>
        <option value="swap" data-type="special">swap</option>
        <option value="swing" data-type="special">swing</option>
        <option value="tada" data-type="special">tada</option>
        <option value="wobble" data-type="special">wobble</option>
    </optgroup>
    <optgroup label="消失动画（退场）">
        <option value="boingOutDown" data-type="out">boingOutDown</option>
        <option value="bombLeftOut" data-type="out">bombLeftOut</option>
        <option value="bombRightOut" data-type="out">bombRightOut</option>
        <option value="bounceOut" data-type="out">bounceOut</option>
        <option value="bounceOutDown" data-type="out">bounceOutDown</option>
        <option value="bounceOutLeft" data-type="out">bounceOutLeft</option>
        <option value="bounceOutRight" data-type="out">bounceOutRight</option>
        <option value="bounceOutUp" data-type="out">bounceOutUp</option>
        <option value="fadeOut" data-type="out">fadeOut</option>
        <option value="fadeOutDown" data-type="out">fadeOutDown</option>
        <option value="fadeOutDownBig" data-type="out">fadeOutDownBig</option>
        <option value="fadeOutLeft" data-type="out">fadeOutLeft</option>
        <option value="fadeOutLeftBig" data-type="out">fadeOutLeftBig</option>
        <option value="fadeOutRight" data-type="out">fadeOutRight</option>
        <option value="fadeOutRightBig" data-type="out">fadeOutRightBig</option>
        <option value="fadeOutUp" data-type="out">fadeOutUp</option>
        <option value="fadeOutUpBig" data-type="out">fadeOutUpBig</option>
        <option value="flipOutX" data-type="out">flipOutX</option>
        <option value="flipOutY" data-type="out">flipOutY</option>
        <option value="foolishOut" data-type="out">foolishOut</option>
        <option value="holeOut" data-type="out">holeOut</option>
        <option value="lightSpeedOut" data-type="out">lightSpeedOut</option>
        <option value="openDownLeftOut" data-type="out">openDownLeftOut</option>
        <option value="openDownRightOut" data-type="out">openDownRightOut</option>
        <option value="openUpLeftOut" data-type="out">openUpLeftOut</option>
        <option value="openUpRightOut" data-type="out">openUpRightOut</option>
        <option value="puffOut" data-type="out">puffOut</option>
        <option value="rollOut" data-type="out">rollOut</option>
        <option value="rotateDown" data-type="out">rotateDown</option>
        <option value="rotateLeft" data-type="out">rotateLeft</option>
        <option value="rotateRight" data-type="out">rotateRight</option>
        <option value="rotateUp" data-type="out">rotateUp</option>
        <option value="rotateOut" data-type="out">rotateOut</option>
        <option value="rotateOutDownLeft" data-type="out">rotateOutDownLeft</option>
        <option value="rotateOutDownRight" data-type="out">rotateOutDownRight</option>
        <option value="rotateOutUpLeft" data-type="out">rotateOutUpLeft</option>
        <option value="rotateOutUpRight" data-type="out">rotateOutUpRight</option>
        <option value="spaceOutDown" data-type="out">spaceOutDown</option>
        <option value="spaceOutLeft" data-type="out">spaceOutLeft</option>
        <option value="spaceOutRight" data-type="out">spaceOutRight</option>
        <option value="spaceOutUp" data-type="out">spaceOutUp</option>
        <option value="tinDownOut" data-type="out">tinDownOut</option>
        <option value="tinLeftOut" data-type="out">tinLeftOut</option>
        <option value="tinRightOut" data-type="out">tinRightOut</option>
        <option value="tinUpOut" data-type="out">tinUpOut</option>
        <option value="swashOut" data-type="out">swashOut</option>
        <option value="vanishOut" data-type="out">vanishOut</option>
        <option value="zoomOut" data-type="out">zoomOut</option>
        <option value="zoomOutDown" data-type="out">zoomOutDown</option>
        <option value="zoomOutLeft" data-type="out">zoomOutLeft</option>
        <option value="zoomOutRight" data-type="out">zoomOutRight</option>
        <option value="zoomOutUp" data-type="out">zoomOutUp</option>
    </optgroup>
</script>
<script type="text/javascript" src="/static/js/jquery.min.js"></script>
<script type="text/javascript" src="/static/js/lib/control.js"></script>
<script type="text/javascript" src="/static/js/lib/template.js"></script>
<script type="text/javascript" src="/static/js/lib/bootstrap.min.js"></script>
<script type="text/javascript" src="/static/js/lib/bootstrap.colorpickersliders.min.js"></script>
<script type="text/javascript" src="/static/js/lib/tinycolor.min.js"></script>
<script type="text/javascript" src="/static/js/lib/interact-1.2.4.min.js"></script>
<script type="text/javascript" src="/static/js/lib/uploadify.js"></script>
<script type="text/javascript" src="/static/js/lib/dialog-min.js"></script>
<script type="text/javascript" src="/static/js/src-noconflict/ace.js" charset="utf-8"></script>
<script type="text/javascript" src="/static/js/lib/utill.js"></script>
<script type="text/javascript" src="/static/js/lib/jquery.qrcode.min.js"></script>
<script type="text/javascript" src="/static/js/lib/zeroclipboard/ZeroClipboard.js"></script>
<script type="text/javascript" src="/static/js/builder.js"></script>
<%include ../partials/foot.html%>